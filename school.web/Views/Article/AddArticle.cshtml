@{
    ViewBag.Title = "AddArticle";
    //var amodel = ViewBag.ArticleModel as TM.Domain.Article;
    //var categories = (IEnumerable<TM.Domain.ArticleCategory>)ViewBag.ArticleCategory;
    var otype = ViewBag.Type;
}

<div id="main">
      <!--  <div class="head_h">
        <div class="rootpath">您现在的位置： <a href="#">文章管理</a> >文章</div>
            <h1>
                <span id="title">文章</span>
            </h1>
        </div>-->
    
    <div id="maincontainer">
        <form enctype="multipart/form-data" id="UpLoadForm">
                    <p>
                <label>
                    <span class="redTxt">*</span>文章标题：</label>
                <div class="form-group">
                    <input class="input_text medium" type="text" id="articlename" name="articlename" maxlength="128" value="" /><span style="color:#ababab;">（最多不能超过128个汉字)</span>
                </div>
            </p>
                    <p>
                <label>
                    作者：</label>
                <div class="form-group">
                    <input class="input_text medium" type="text" id="author" name="author"  value="" />
                </div>
            </p> 
                    <p>
                <label>
                    <span class="redTxt">*</span>文章分类：</label>
                <div class="form-group">
                    <select data-bind="options: categories,optionsText: 'name',optionsValue: 'id',optionsCaption: '请选择',value:form.categoryid"  style="width:100px;"></select>
                </div>
            </p>

                    <p>
                <label>
                    文章封面：</label>
                <div class="form-group">
                
                <input type="button" id="uploadPhoto" value="选择图片" class="input_button" onclick="$('#imgFile').click();"  style="display:none;">&nbsp;
                <a class="file">选择图片<input type="file" id="imgFile" name="imgFile" onchange="upload('UpLoadForm','Article','imgFile','articleimg')" /></a><br />
                <img style="height:340px;width:640px;margin-top:10px;" id="articleimg" src="" /><span style="color:#ababab;">（建议上传尺寸为640px*340px的图片）</span>
                
                </div>
            </p>
                  <!-- <p>
                <label>
                    文章封面：</label>
                <div class="form-group">
                    <img style="height:100px;width:100px;" id="articlebgimg" src="" /><span style="color:#ababab;">（建议上传尺寸为640px*1150px的图片）</span>
                </div>
            </p>
                    <p>
                <label>
                    设置背景颜色：</label>
                <div class="form-group">
                   <select>
                    <option selected="selected">不设置</option>
                    <option>设置</option>
                   </select>
                   </div>
            </p>
                    <p>
                <label>
                    设置标题颜色：</label>
                <div class="form-group">
                    <select>
                    <option selected="selected">不设置</option>
                    <option>设置</option>
                   </select>
                 </div>
            </p>
                    <p>
                <label>
                    设置标题样式：</label>
                <div class="form-group">
                    <input type="checkbox" />加粗&nbsp;<input type="checkbox" />居中
                </div>
            </p>-->
                    <p>
                <label>
                    文章摘要：</label>
                <div class="form-group">
                    <textarea id="abstract" name="abstract" style="height:200px;"></textarea><span style="color:#ababab;">（最多不能超过1024个汉字）</span>
                </div>
            </p>
                    <p>
                <label>
                    <span class="redTxt">*</span>文章内容：</label>
                <div class="form-group">
                    <textarea id="content" name="content" ></textarea>
                </div>
            </p>

                    <p>
                <label>
                    推荐排序：</label>
                <div class="form-group">
                    <input class="input_text txtshort" type="text"  id="txtorder" name="txtorder" onkeyup="value=value.replace(/[^\d]/g, '')" value=""  /><span style="color:#ababab;">(说明：值越大，越排到前面)</span>
                </div>
            </p>    
                    <p>
                <label>
                    &nbsp;</label>
                <!--<input type="button" id="btnApply" class="input_button" value="保存" onclick="baseSave()" />-->
                <a  class="easyui-linkbutton" style="width:80px;" data-bind="click:baseSave">保存</a>
            </p>
                <//form>
                </div>
    
    <input type="hidden" id="isfish" value="1" />
</div>
<!--
<div id="dlgtick" class="easyui-dialog" title="添加一级分类" data-options="closed: true,modal:true" style="width:600px;height:auto;">    
                <form enctype="multipart/form-data" id="CategoryForm">
                    <div style="margin:10px 5px 10px 5px;">
                        <label>
                            <span class="redTxt">*</span>名称：</label>
                        <div class="form-group">
                            <input class="input_text medium" type="text" id="cname" name="cname" maxlength="64"  /><span style="color:#ababab;">（最多不超过64个汉字）</span>
                        </div>
                    </div>
                    <div style="margin:10px 5px 10px 5px;">
                        <label>
                            <span class="redTxt">*</span>有效期：</label>
                        <div class="form-group">
                            <input id="begintime" name="begintime" class="input_text Wdate" type="text" onclick="WdatePicker({skin:'whyGreen',dateFmt:'yyyy-MM-dd'})" readonly="readonly"   />至
                            <input id="endtime" name="endtime" class="input_text Wdate" type="text" onclick="WdatePicker({skin:'whyGreen',dateFmt:'yyyy-MM-dd'})" readonly="readonly"   />
                            <input type="checkbox" />不限制
                        </div>
                    </div>   
                    <div style="margin:10px 5px 10px 5px;">
                        <label>
                            <span class="redTxt">*</span>星期：</label>
                            <div class="form-group">
                                <input type="checkbox" checked="checked" />周一
                                <input type="checkbox" checked="checked" />周二
                                <input type="checkbox" checked="checked" />周三
                                <input type="checkbox" checked="checked" />周四
                                <input type="checkbox" checked="checked" />周五
                                <input type="checkbox" checked="checked" />周六
                                <input type="checkbox" checked="checked" />周日
                                <input type="checkbox" checked="checked" />全选
                        </div>
                    </div>
                    <div style="margin:10px 5px 10px 5px;display:none;">
                    <label>
                            <span class="redTxt">*</span>票面价：</label>
                            <div class="form-group">
                                <input type="text" class="input_text txtshort" />元
                            </div>
                    </div>
                    <div style="margin:10px 5px 10px 5px;display:none;">
                    <label>
                            <span class="redTxt">*</span>销售价：</label>
                            <div class="form-group">
                                <input type="text" class="input_text txtshort" />元
                            </div>
                    </div>
                    <div style="margin:10px 5px 10px 5px;display:none;">
                    <label>
                            说明：</label>
                            <div class="form-group">
                                <textarea id="categorydesc" name="categorydesc" ></textarea>
                            </div>
                    </div>
                    <div style="margin:10px 5px 10px 5px;display:none;">
                    <label>
                            推荐排序：</label>
                            <div class="form-group">
                                <input class="input_text txtshort" type="text" id="cateorder" name="cateorder"  />(说明：值越小，越排到前面)
                            </div>
                    </div>
                    <div style="margin:10px 5px 10px 5px;text-align:center;border-top:1px solid #c8c8c8;padding-top:10px;">
            
                        <input type="button"  class="input_button" value="确定" onclick="save(1,'AroundTravel')" />&nbsp;
                        <input type="button"  class="input_button" value="关闭" onclick="$('#dlg').dialog('close');" />
                    </div>
                </form>
            </div>
-->

<link href="../../Content/css/global.css" rel="stylesheet" type="text/css" />
<script src="../../Content/plugins/jquery-1.11.3.min.js"></script>
<script src="../../Content/plugins/jquery.slimscroll.min.js" type="text/javascript"></script>
<script src="../../Content/plugins/knockout-3.3.0.js"></script>
<script src="../../Content/viewmodel/article/addarticle.js"></script>

<script>
    $(function () {
        
        $('#maincontainer').slimscroll({
            height: '670px'
        });


        var viewModel = new articleViewModel();
        ko.applyBindings(viewModel, document.getElementById('main'));
        viewModel.Init();



    });

</script>

