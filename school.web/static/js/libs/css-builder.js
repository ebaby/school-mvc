define(["require","./normalize"],function(V,T){var d={};var c=!!process.platform.match(/^win/);function a(A){if(W.optimizeCss=="none"){return A}if(typeof process!=="undefined"&&process.versions&&!!process.versions.node&&require.nodeRequire){try{var C=require.nodeRequire("csso")}catch(D){console.log('Compression module not installed. Use "npm install csso -g" to enable.');return A}var B=A.length;try{A=C.justDoIt(A)}catch(D){console.log("Compression failed due to a CSS syntax error.");return A}console.log("Compressed CSS output to "+Math.round(A.length/B*100)+"%.");return A}console.log("Compression not supported outside of nodejs environments.");return A}function b(C){if(typeof process!=="undefined"&&process.versions&&!!process.versions.node&&require.nodeRequire){var F=require.nodeRequire("fs");var G=F.readFileSync(C,"utf8");if(G.indexOf("\uFEFF")===0){return G.substring(1)}return G}else{var G=new java.io.File(C),D=java.lang.System.getProperty("line.separator"),E=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(G),"utf-8")),B,A;try{B=new java.lang.StringBuffer();A=E.readLine();if(A&&A.length()&&A.charAt(0)===65279){A=A.substring(1)}B.append(A);while((A=E.readLine())!==null){B.append(D).append(A)}return String(B.toString())}finally{E.close()}}}function h(C,D){if(typeof process!=="undefined"&&process.versions&&!!process.versions.node&&require.nodeRequire){var B=require.nodeRequire("fs");B.writeFileSync(C,D,"utf8")}else{var A=new java.lang.String(D);var E=new java.io.BufferedWriter(new java.io.OutputStreamWriter(new java.io.FileOutputStream(C),"utf-8"));try{E.write(A,0,A.length());E.flush()}finally{E.close()}}}function U(A){return A.replace(/(["'\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")}var k=/@import\s*(url)?\s*(('([^']*)'|"([^"]*)")|\(('([^']*)'|"([^"]*)"|([^\)]*))\))\s*;?/g;var i=/^([^\:\/]+:\/)?\//;var X="define('@writecss', function() {return function writeCss(c) {var d=document,a='appendChild',i='styleSheet',s=d.createElement('style');s.type='text/css';d.getElementsByTagName('head')[0][a](s);s[i]?s[i].cssText=c:s[a](d.createTextNode(c));};});";var e;var Y=V.toUrl("base_url").split("/");Y[Y.length-1]="";var Z=Y.join("/");var f=0;var W;var j=true;var g=[];var l={};d.load=function(E,D,C,F){W=W||F;if(!e){e=path.resolve(W.dir||path.dirname(W.out),W.siteRoot||".")+"/";if(c){e=e.replace(/\\/g,"/")}}if(E.match(i)){return C()}var B=D.toUrl(E+".css");if(c){B=B.replace(/\\/g,"/")}var A=B;if(A.indexOf(Z)<0){var G=D.toUrl(W.appDir);if(c){G=G.replace(/\\/g,"/")}if(A.indexOf(G)==0){A=e+A.substring(G.length)}}l[E]=T(b(B),A,e);C()};d.normalize=function(B,A){if(B.substr(B.length-4,4)==".css"){B=B.substr(0,B.length-4)}return A(B)};d.write=function(E,F,D,C){var B;if(F.match(i)){return}g.push(l[F]);if(!global._requirejsCssData){global._requirejsCssData={usedBy:{css:true},css:""}}else{global._requirejsCssData.usedBy.css=true}if(W.buildCSS!=false){var A=l[F];if(W.writeCSSModule&&A){if(j){j=false;D(X)}B='define(["@writecss"], function(writeCss){\n writeCss("'+U(a(A))+'");\n})'}else{B="define(function(){})"}D.asModule(E+"!"+F,B)}};d.onLayerEnd=function(D,E){if(W.separateCSS&&W.IESelectorLimit){throw"RequireCSS: separateCSS option is not compatible with ensuring the IE selector limit"}if(W.separateCSS){var F=E.path.replace(/(\.js)?$/,".css");console.log("Writing CSS! file: "+F+"\n");var C=g.join("");process.nextTick(function(){if(global._requirejsCssData){C=global._requirejsCssData.css=C+global._requirejsCssData.css;delete global._requirejsCssData.usedBy.css;if(Object.keys(global._requirejsCssData.usedBy).length===0){delete global._requirejsCssData}}h(F,a(C))})}else{if(W.buildCSS!=false&&W.writeCSSModule!=true){var B=W.IESelectorLimit?g:[g.join("")];for(var A=0;A<B.length;A++){if(B[A]==""){return}D("(function(c){var d=document,a='appendChild',i='styleSheet',s=d.createElement('style');s.type='text/css';d.getElementsByTagName('head')[0][a](s);s[i]?s[i].cssText=c:s[a](d.createTextNode(c));})\n('"+U(a(B[A]))+"');\n")}}}g=[];j=true};return d});