@{
    ViewBag.Title = "AddArticle";
    //var amodel = ViewBag.ArticleModel as TM.Domain.Article;
    //var categories = (IEnumerable<TM.Domain.ArticleCategory>)ViewBag.ArticleCategory;
    var otype = ViewBag.Type;
    var id = ViewBag.ArticleID;
}
<div id="addarticle">
      <!--  <div class="head_h">
        <div class="rootpath">您现在的位置： <a href="#">文章管理</a> >文章</div>
            <h1>
                <span id="title">文章</span>
            </h1>
        </div>-->
    
    <div id="maincontainer">
        <form enctype="multipart/form-data" id="UpLoadForm">
                    <p>
                <label>
                    <span class="redTxt">*</span>文章标题：</label>
                <div class="form-group">
                    <input class="input_text medium" type="text" id="articlename" name="articlename" maxlength="128" value="" data-bind="value:article.name" /><span style="color:#ababab;">（最多不能超过128个汉字)</span>
                </div>
            </p>
                    <!--<p>
                <label>
                    作者：</label>
                <div class="form-group">
                    <input class="input_text medium" type="text" id="author" name="author"  value="" />
                </div>
            </p> -->
                    <p>
                <label>
                    <span class="redTxt">*</span>文章分类：</label>
                <div class="form-group">
                    <select data-bind="options: categories,optionsText: 'text',optionsValue: 'id',optionsCaption: '请选择',value:article.menuid"  style="width:100px;"></select>
                </div>
            </p>

                    <!--<p>
                <label>
                    文章封面：</label>
                <div class="form-group">
                
                <input type="button" id="uploadPhoto" value="选择图片" class="input_button" onclick="$('#imgFile').click();"  style="display:none;">&nbsp;
                <a class="file">选择图片<input type="file" id="imgFile" name="imgFile" onchange="upload('UpLoadForm','Article','imgFile','articleimg')" /></a><br />
                <img style="height:340px;width:640px;margin-top:10px;" id="articleimg" src="" /><span style="color:#ababab;">（建议上传尺寸为640px*340px的图片）</span>
                
                </div>
            </p>-->
                  <!-- <p>
                <label>
                    文章封面：</label>
                <div class="form-group">
                    <img style="height:100px;width:100px;" id="articlebgimg" src="" /><span style="color:#ababab;">（建议上传尺寸为640px*1150px的图片）</span>
                </div>
            </p>
                    <p>
                <label>
                    设置背景颜色：</label>
                <div class="form-group">
                   <select>
                    <option selected="selected">不设置</option>
                    <option>设置</option>
                   </select>
                   </div>
            </p>
                    <p>
                <label>
                    设置标题颜色：</label>
                <div class="form-group">
                    <select>
                    <option selected="selected">不设置</option>
                    <option>设置</option>
                   </select>
                 </div>
            </p>
                    <p>
                <label>
                    设置标题样式：</label>
                <div class="form-group">
                    <input type="checkbox" />加粗&nbsp;<input type="checkbox" />居中
                </div>
            </p>
                    <p>
                <label>
                    文章摘要：</label>
                <div class="form-group">
                    <textarea id="abstract" name="abstract" style="height:200px;"></textarea><span style="color:#ababab;">（最多不能超过1024个汉字）</span>
                </div>
            </p>-->
            <!--<p>
                <label>
                    <span class="redTxt">*</span>文章类型：</label>
                <div class="form-group">
                    <input type="radio" value="0" data-bind="checked:article.articletype" />文字
                    <input type="radio" value="1" data-bind="checked:article.articletype" />图片
                </div>
            </p>-->
            <div data-bind="visible:article.articletype()=='0'">
                <p>
                    <label>
                        <span class="redTxt">*</span>文章内容：
                    </label>
                    <div class="form-group">
                        <textarea id="content" name="content" data-bind="value:article.content"></textarea>
                    </div>
                </p>
            </div>
            <div data-bind="visible:article.articletype()=='0'">
                <p>
                <!--<form id="form1">-->
                <label>
                    文章图片：
                </label>
                <div class="form-group">
                    <input type="button" id="btnUpload" value="选择图片" onclick="$('#pimage').click()" class="button" style="display:none;" />
                    <a class="file">选择图片<input type="file" id="pimage" name="pimage" data-bind="event:{change:upload}"  /></a>

                </div>
                <!--</form>-->
                <div id="dvPic" style="display: none;" data-bind="style:{display:article.imageurl().length>0?'block':'none'}">
                    <div class="infopic">
                        <div class="picbox">
                            <ul class="gallery piclist" data-bind="foreach:article.imageurl">
                                <li>
                                    <img data-bind="attr:{src:$data}" /><div class="pic_close" data-bind="click:$root.delImage"></div>
                                </li>

                            </ul>
                        </div>
                        <div class="pic_prev" ></div>
                        <div class="pic_next" ></div>
                    </div>
                </div>

            </p>
            </div>
                    <p>
                <label>
                    推荐排序：</label>
                <div class="form-group">
                    <input class="input_text txtshort" type="text"  id="txtorder" name="txtorder" onkeyup="value=value.replace(/[^\d]/g, '')" value="" data-bind="value:article.orderid"  /><span style="color:#ababab;">(说明：值越大，越排到前面)</span>
                </div>
            </p>    
                    <p>
                <label>
                    &nbsp;</label>
                <!--<input type="button" id="btnApply" class="input_button" value="保存" onclick="baseSave()" />-->
                <a  class="easyui-linkbutton" style="width:80px;" data-bind="event:{click:baseSave},style:{display:isdisabled()}">保存</a>
            </p>
                <//form>
                </div>
    
    <input type="hidden" id="isfish" value="1" />
</div>

<link href="../../Areas/Admin/Content/css/global.css" rel="stylesheet" type="text/css" />
<link href="../../Areas/Admin/Content/plugins/easyui/themes/gray/easyui.css" rel="stylesheet" type="text/css" />
<link href="../../Areas/Admin/Content/plugins/easyui/themes/icon.css" rel="stylesheet" type="text/css" />

<script src="//cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
<script src="../../Areas/Admin/Content/plugins/jquery.slimscroll.min.js" type="text/javascript"></script>
<script src="//cdn.bootcss.com/knockout/3.4.2/knockout-min.js"></script>
<script src="../../Areas/Admin/Content/plugins/easyui/jquery.easyui.min.js"></script>
<script src="//cdn.bootcss.com/layer/3.0.1/layer.min.js"></script>
<script src="../../Areas/Admin/ViewModel/article/addarticle.js"></script>
<script src="//cdn.bootcss.com/jquery.form/4.2.1/jquery.form.min.js"></script>
<script src="../../Areas/Admin/Content/plugins/ueditor/ueditor.config.js"></script>
<script src="../../Areas/Admin/Content/plugins/ueditor/ueditor.all.js"></script>
<script src="../../Areas/Admin/Content/plugins/ueditor/lang/zh-cn/zh-cn.js"></script>

<script>
    //$(function () {
        
        //$('#maincontainer').slimscroll({
        //    height: '670px'
        //});
    var ue = UE.getEditor('content');
    var viewModel = new articleViewModel('@otype',@id);
        ko.applyBindings(viewModel, document.getElementById('addarticle'));
        viewModel.Init();



    //});

</script>

